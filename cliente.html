<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Abertura de Chamado</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Solicitar Suporte</h1>

  <form id="form-chamado">
    <input type="text" id="nome" placeholder="Seu nome" required><br><br>
    <input type="email" id="email" placeholder="Seu email" required><br><br>
    <textarea id="mensagem" placeholder="Descreva o problema" required></textarea><br><br>
    <button type="submit">Enviar Chamado</button>
  </form>

  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
  <script src="js/firebase-config.js"></script>

  <script>
    const form = document.getElementById("form-chamado");

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const nome = document.getElementById("nome").value;
      const email = document.getElementById("email").value;
      const mensagem = document.getElementById("mensagem").value;

      const protocolo = "PROTOCOLO-" + Date.now();

      firebase.firestore().collection("chamados").add({
        nome: nome,
        email: email,
        mensagem: mensagem,
        status: "Aberto",
        data: new Date().toISOString(),
        protocolo: protocolo
      }).then(() => {
        alert("✅ Obrigado! Seu chamado foi enviado com sucesso.\nProtocolo: " + protocolo);
        form.reset();
      }).catch((error) => {
        console.error("Erro ao enviar chamado:", error);
        alert("❌ Ocorreu um erro ao enviar seu chamado. Tente novamente.");
      });
    });
  </script>
</body>
</html>
